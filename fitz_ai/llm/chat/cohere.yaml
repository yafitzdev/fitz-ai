# fitz_ai/llm/chat/cohere.yaml
# Cohere Chat Plugin - v1 Chat API
#
# Documentation: https://docs.cohere.com/reference/chat
# Required: COHERE_API_KEY environment variable
#
# Available models (as of 2025):
#   - command-a-03-2025       (newest, best performance)
#   - command-r-plus-08-2024  (powerful, complex tasks)
#   - command-r-08-2024       (efficient, general purpose)
#
# Note: command-r-plus was retired September 15, 2025

plugin_name: "cohere"
plugin_type: "chat"
version: "1.0"

provider:
  name: "cohere"
  base_url: "https://api.cohere.ai/v1"

auth:
  type: "bearer"
  header_name: "Authorization"
  header_format: "Bearer {key}"
  env_vars:
    - "COHERE_API_KEY"

endpoint:
  path: "/chat"
  method: "POST"
  timeout: 120

defaults:
  model: "command-r-plus-08-2024"
  temperature: 0.2

request:
  messages_transform: "cohere_chat"
  static_fields:
    stream: false
  param_map:
    model: "model"
    temperature: "temperature"
    max_tokens: "max_tokens"

response:
  content_path: "text"
  metadata_paths:
    finish_reason: "finish_reason"
    tokens_input: "meta.billed_units.input_tokens"
    tokens_output: "meta.billed_units.output_tokens"