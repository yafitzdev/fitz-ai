# fitz_ai/engines/fitz_rag/config/default.yaml
#
# Default configuration for Fitz RAG engine.
#
# Fitz RAG uses dense retrieval with optional reranking to find relevant
# chunks, then synthesizes answers with citation support.
#
# This default uses:
#   - Cohere for chat, embedding, and rerank (requires COHERE_API_KEY)
#   - Local FAISS for vector storage (no external service needed)

fitz_rag:

  # ===========================================================================
  # Default Engine
  # ===========================================================================

  default_engine: fitz_rag

  # ===========================================================================
  # Chat
  # ===========================================================================
  # Model tiers (smart/fast) and defaults are defined in the plugin YAML.

  chat:
    plugin_name: cohere

  # ===========================================================================
  # Embedding
  # ===========================================================================

  embedding:
    plugin_name: cohere

  # ===========================================================================
  # Vector Database
  # ===========================================================================

  vector_db:
    plugin_name: local_faiss

  # ===========================================================================
  # Retrieval
  # ===========================================================================

  retrieval:
    plugin_name: dense
    collection: default
    top_k: 5

  # ===========================================================================
  # Reranker
  # ===========================================================================

  rerank:
    enabled: true
    plugin_name: cohere

  # ===========================================================================
  # RGS (Retrieval-Guided Synthesis)
  # ===========================================================================

  rgs:
    enable_citations: true
    strict_grounding: true
    max_chunks: 8

  # ===========================================================================
  # Logging
  # ===========================================================================

  logging:
    level: INFO

  # ===========================================================================
  # Ingestion
  # ===========================================================================
  # Chunker defaults are defined in each plugin.
  # Override here only if you want different settings.

  ingest:
    ingester:
      plugin_name: local

    chunking:
      default:
        plugin_name: recursive
      by_extension:
        .py:
          plugin_name: python_code
        .md:
          plugin_name: markdown
        .pdf:
          plugin_name: pdf_sections
      warn_on_fallback: true

    collection: default
